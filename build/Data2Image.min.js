(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports = { "default": require("core-js/library/fn/math/sign"), __esModule: true };
},{"core-js/library/fn/math/sign":6}],2:[function(require,module,exports){
module.exports = { "default": require("core-js/library/fn/number/epsilon"), __esModule: true };
},{"core-js/library/fn/number/epsilon":7}],3:[function(require,module,exports){
module.exports = { "default": require("core-js/library/fn/object/define-property"), __esModule: true };
},{"core-js/library/fn/object/define-property":8}],4:[function(require,module,exports){
"use strict";

exports["default"] = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

exports.__esModule = true;
},{}],5:[function(require,module,exports){
"use strict";

var _Object$defineProperty = require("babel-runtime/core-js/object/define-property")["default"];

exports["default"] = (function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;

      _Object$defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
})();

exports.__esModule = true;
},{"babel-runtime/core-js/object/define-property":3}],6:[function(require,module,exports){
require('../../modules/es6.math.sign');
module.exports = require('../../modules/$.core').Math.sign;
},{"../../modules/$.core":10,"../../modules/es6.math.sign":16}],7:[function(require,module,exports){
require('../../modules/es6.number.epsilon');
module.exports = Math.pow(2, -52);
},{"../../modules/es6.number.epsilon":17}],8:[function(require,module,exports){
var $ = require('../../modules/$');
module.exports = function defineProperty(it, key, desc){
  return $.setDesc(it, key, desc);
};
},{"../../modules/$":14}],9:[function(require,module,exports){
module.exports = function(it){
  if(typeof it != 'function')throw TypeError(it + ' is not a function!');
  return it;
};
},{}],10:[function(require,module,exports){
var core = module.exports = {version: '1.2.6'};
if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef
},{}],11:[function(require,module,exports){
// optional / simple context binding
var aFunction = require('./$.a-function');
module.exports = function(fn, that, length){
  aFunction(fn);
  if(that === undefined)return fn;
  switch(length){
    case 1: return function(a){
      return fn.call(that, a);
    };
    case 2: return function(a, b){
      return fn.call(that, a, b);
    };
    case 3: return function(a, b, c){
      return fn.call(that, a, b, c);
    };
  }
  return function(/* ...args */){
    return fn.apply(that, arguments);
  };
};
},{"./$.a-function":9}],12:[function(require,module,exports){
var global    = require('./$.global')
  , core      = require('./$.core')
  , ctx       = require('./$.ctx')
  , PROTOTYPE = 'prototype';

var $export = function(type, name, source){
  var IS_FORCED = type & $export.F
    , IS_GLOBAL = type & $export.G
    , IS_STATIC = type & $export.S
    , IS_PROTO  = type & $export.P
    , IS_BIND   = type & $export.B
    , IS_WRAP   = type & $export.W
    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})
    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]
    , key, own, out;
  if(IS_GLOBAL)source = name;
  for(key in source){
    // contains in native
    own = !IS_FORCED && target && key in target;
    if(own && key in exports)continue;
    // export native or passed
    out = own ? target[key] : source[key];
    // prevent global pollution for namespaces
    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]
    // bind timers to global for call from export context
    : IS_BIND && own ? ctx(out, global)
    // wrap global constructors for prevent change them in library
    : IS_WRAP && target[key] == out ? (function(C){
      var F = function(param){
        return this instanceof C ? new C(param) : C(param);
      };
      F[PROTOTYPE] = C[PROTOTYPE];
      return F;
    // make static versions for prototype methods
    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;
  }
};
// type bitmap
$export.F = 1;  // forced
$export.G = 2;  // global
$export.S = 4;  // static
$export.P = 8;  // proto
$export.B = 16; // bind
$export.W = 32; // wrap
module.exports = $export;
},{"./$.core":10,"./$.ctx":11,"./$.global":13}],13:[function(require,module,exports){
// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global = module.exports = typeof window != 'undefined' && window.Math == Math
  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();
if(typeof __g == 'number')__g = global; // eslint-disable-line no-undef
},{}],14:[function(require,module,exports){
var $Object = Object;
module.exports = {
  create:     $Object.create,
  getProto:   $Object.getPrototypeOf,
  isEnum:     {}.propertyIsEnumerable,
  getDesc:    $Object.getOwnPropertyDescriptor,
  setDesc:    $Object.defineProperty,
  setDescs:   $Object.defineProperties,
  getKeys:    $Object.keys,
  getNames:   $Object.getOwnPropertyNames,
  getSymbols: $Object.getOwnPropertySymbols,
  each:       [].forEach
};
},{}],15:[function(require,module,exports){
// 20.2.2.28 Math.sign(x)
module.exports = Math.sign || function sign(x){
  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;
};
},{}],16:[function(require,module,exports){
// 20.2.2.28 Math.sign(x)
var $export = require('./$.export');

$export($export.S, 'Math', {sign: require('./$.math-sign')});
},{"./$.export":12,"./$.math-sign":15}],17:[function(require,module,exports){
// 20.1.2.1 Number.EPSILON
var $export = require('./$.export');

$export($export.S, 'Number', {EPSILON: Math.pow(2, -52)});
},{"./$.export":12}],18:[function(require,module,exports){
'use strict';

var _createClass = require('babel-runtime/helpers/create-class')['default'];

var _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];

Object.defineProperty(exports, '__esModule', {
	value: true
});

var _encode = require('./encode');

var _decode = require('./decode');

var _raster = require('./raster');

// Class

var Data2Image = (function () {
	function Data2Image(options) {
		_classCallCheck(this, Data2Image);

		this.options = options || {};
		this.elements = [];
		this.instances = 0;
	}

	_createClass(Data2Image, [{
		key: 'addElement',
		value: function addElement(name, type, populate_callback, range) {
			this.elements.push({ id: this.elements.length, name: name, type: type, range: range, fill: populate_callback });
		}
	}, {
		key: 'getTotalElements',
		value: function getTotalElements() {
			return this.elements.length;
		}
	}, {
		key: 'setTotalInstances',
		value: function setTotalInstances(number) {
			this.instances = number;
		}
	}, {
		key: 'getTotalInstances',
		value: function getTotalInstances() {
			return this.instances;
		}
	}, {
		key: 'getTableSize',
		value: function getTableSize() {
			return [this.getTotalInstances(), this.getTotalElements()];
		}
	}, {
		key: 'getUrl',
		value: function getUrl() {
			var width = this.getTotalInstances();
			var height = this.getTotalElements();

			var channels = 4;
			var rgba = new Array(width * height * channels);
			var index = undefined,
			    r = undefined,
			    i = undefined,
			    v = undefined;
			for (var y = 0; y < height; y++) {
				for (var x = 0; x < width; x++) {
					index = (y * width + x) * channels;
					v = this.elements[y].fill(x, this.elements[y]);
					var value = (0, _encode.encodeValue)(v, this.elements[y].type, this.elements[y].range);
					for (i = 0; i < channels; i++) {
						rgba[index + i] = value[i];
					}
				}
			}
			return (0, _raster.encodeRGBAtoPNG)(rgba, width, height);
		}
	}, {
		key: 'getImg',
		value: function getImg() {
			var img = document.createElement("IMG");
			img.setAttribute('src', this.getUrl());
			return img;
		}
	}, {
		key: 'version',
		value: function version() {
			return '0.0.3';
		}
	}]);

	return Data2Image;
})();

exports['default'] = Data2Image;

window.Data2Image = Data2Image;
module.exports = exports['default'];

},{"./decode":20,"./encode":21,"./raster":22,"babel-runtime/helpers/class-call-check":4,"babel-runtime/helpers/create-class":5}],19:[function(require,module,exports){
'use strict';

var _Number$EPSILON = require('babel-runtime/core-js/number/epsilon')['default'];

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports.clamp = clamp;
exports.map = map;
exports.decimals = decimals;

function clamp(value, min, max) {
    // return Math.max(min, Math.min(max, value)); // faster??
    return value > max ? max : value < min ? min : value;
}

function map(value, inputMin, inputMax, outputMin, outputMax) {
    var clamp = arguments.length <= 5 || arguments[5] === undefined ? true : arguments[5];

    if (Math.abs(inputMin - inputMax) < _Number$EPSILON) {
        return outputMin;
    } else {
        var outVal = (value - inputMin) / (inputMax - inputMin) * (outputMax - outputMin) + outputMin;
        if (clamp) {
            if (outputMax < outputMin) {
                if (outVal < outputMax) {
                    outVal = outputMax;
                } else if (outVal > outputMin) {
                    outVal = outputMin;
                }
            } else {
                if (outVal > outputMax) {
                    outVal = outputMax;
                } else if (outVal < outputMin) {
                    outVal = outputMin;
                }
            }
        }
        return outVal;
    }
}

function decimals(number) {
    var match = (Math.abs(number) + '').match(/\d+\.(\d+)/);
    return match ? match[1].length : 0;
}

},{"babel-runtime/core-js/number/epsilon":2}],20:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports.getDecodeFunctionFor = getDecodeFunctionFor;

var _encode = require('./encode');

var common = '\nvec2 getCoord(vec2 res, float col, float row) {\n    return fract(vec2(col,row+.5)/res);\n}' + '\n';

var uint = common + '\nfloat getUInt(sampler2D tex, vec2 res, float col, float row) {\n    highp vec4 value = texture2D(tex, coord);\n    return (value.x*255.)+(value.y*65025.)+(value.z*16581375.);\n}';

var ufloat = common + '\nfloat getUFloat(sampler2D tex, vec2 res, float col, float row) {\n    highp vec4 value = texture2D(tex, coord);\n    return ((value.x*255.)+(value.y*65025.)+(value.z*16581375.))/16581375.;\n}';

var position = common + '\nvec2 getPosition(sampler2D tex, vec2 res, float col, float row) {\n    vec2 coord = getCoord(res, col, row);\n    highp vec4 value = texture2D(tex, coord);\n    float x = (value.r*255+value.g*65025.)/65025.;\n    float y = (value.b*255.+value.a*65025.)/65025.;\n    return vec2(x,y);\n}' + '\n';

var color = common + '\nvec4 getColor(sampler2D tex, vec2 res, float col, float row) {\n    vec2 coord = getCoord(res, col, row);\n    return texture2D(tex, coord);\n}' + '\n';

var decode = {
    uint: uint,
    int: uint + '\nfloat getInt(sampler2D tex, vec2 res, float col, float row) {\n    return getUInt(tex,res,col,row)-8290688.;\n}',
    ufloat: ufloat,
    float: ufloat + '\nfloat getUFloat(sampler2D tex, vec2 res, float col, float row) {\n    return (getUFloat(tex,res,col,row)-.5)*2.;\n}',
    number: common + '\nvec3 getElements(sampler2D tex, vec2 coord) {\n    highp vec4 value = texture2D(tex, coord);\n    highp float uint = (value.x*255.)+(value.y*65025.)+(value.z*16581375.);\n    float press = ceil(value.a*255.)-244.;\n    return vec3(uint, abs(press), sign(press));\n}\nfloat getNumber(sampler2D tex, vec2 res, float col, float row) {\n    vec2 coord = getCoord(res, col, row);\n    highp vec3 elements = getElements(tex, coord);\n    return elements.x * pow(10.,-floor(elements.y)) * elements.z;\n}' + '\n',
    position: position,
    color: color,
    rgb: color,
    vec2: position,
    vec3: color,
    vec4: color
};

function getDecodeFunctionFor(type) {
    return decode[type];
}

window.getDecodeFunctionFor = getDecodeFunctionFor;

},{"./encode":21}],21:[function(require,module,exports){
'use strict';

var _Math$sign = require('babel-runtime/core-js/math/sign')['default'];

Object.defineProperty(exports, '__esModule', {
	value: true
});
exports.getRangeFor = getRangeFor;
exports.encodeValue = encodeValue;

var _common = require('./common');

// Default Ranges
var ranges = {
	number: [-16581375, 16581375],
	char: [-128, 127],
	uchar: [0, 255],
	int: [-8290688, 8290687],
	uint: [0, 16581375],
	float: [-1, 1],
	ufloat: [0, 1],
	position: [-1, 1],
	color: [0, 255],
	rgb: [0, 255],
	vec2: [-1, 1],
	vec3: [-1, 1],
	vec4: [-1, 1]
};

function getRangeFor(type) {
	return ranges[type];
}

function clampValue(value, range) {
	if (value < range[0] || value > range[1]) {
		console.warn('Value', value, 'is out of range', range, 'will be clamped to', (0, _common.clamp)(value, range[0], range[1]));
		return (0, _common.clamp)(value, range[0], range[1]);
	} else {
		return value;
	}
}

function normalizeValue(value, range) {
	return (0, _common.map)(value, range[0], range[1], 0, 1);
}

function encodeValue(value, type, range) {
	if (!range) {
		range = getRangeFor(type);
	}

	if (typeof value === 'number') {
		value = clampValue(value, range);
		if (type !== 'number') {
			// "Number" type don't need normaliztion because tries to set the presition dinamically
			value = normalizeValue(value, range);
		}
	} else if (Array.isArray(value)) {
		for (var i in value) {
			value[i] = clampValue(value[i], range);
			if (type !== 'number') {
				// "Number" type don't need normaliztion because tries to set the presition dinamically
				value[i] = normalizeValue(value[i], range);
			}
		}
	} else {
		console.log('Value type could not be read', value, type, range);
		return;
	}

	if (type === 'uchar' || type === 'char') {
		value *= 255;
		return [Math.floor(value), Math.floor(value), Math.floor(value), 255];
	} else if (type === 'int' || type === 'uint' || type === 'float' || type === 'ufloat') {
		value = value * 16581375;
		return [Math.floor(value % 255), Math.floor(value / 255) % 255, Math.floor(value / (255 * 255)), 255];
	} else if (type === 'number') {
		var s = _Math$sign(value);
		var d = (0, _common.decimals)(value) + 1.;
		var uint = Math.abs(value) * Math.pow(10, d); // transform the number into unsigned integers
		var pres = 244 + d * s;
		// console.log("Value:",value,"S:",s,"D:",d,"Uint:",uint,"Press:",pres);
		return [Math.floor(uint) % 255, Math.floor(uint / 255) % 255, Math.floor(uint / 65025) % 255, Math.floor(pres) % 255];
	} else if (type === 'position' || type === 'vec2') {
		var x = value[0] * 65025;
		var y = value[1] * 65025;
		return [Math.floor(x % 255), Math.floor(x / 255) % 255, Math.floor(y % 255), Math.floor(y / 255) % 255];
	} else if (type === 'color' || type === 'rgb' || type === 'vec3' || type === 'vec4') {
		return [Math.floor(value[0] * 255), Math.floor(value[1] * 255), Math.floor(value[2] * 255), value[3] ? Math.floor(value[3] * 255) : 255];
	}
}

window.getRangeFor = getRangeFor;

},{"./common":19,"babel-runtime/core-js/math/sign":1}],22:[function(require,module,exports){
/**
 * @author Bei ZHANG <ikarienator@gmail.com> http://twbs.in/
 *
 * Copyright Â© 2012 Bei ZHANG <ikarienator@gmail.com>. All Rights Reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation and/or
 * other materials provided with the distribution.
 *
 * 3. The name of the author may not be used to endorse or promote products derived
 * from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY Bei ZHANG "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
 * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.encodeRGBAtoPNG = encodeRGBAtoPNG;
var Base64Map = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

function PNGStream() {
    this.array = new Uint8Array(PNGSignature);
    this.length = this.array.length;
    this.crcStart = 0;
}

PNGStream.prototype = {

    resetCRC: function resetCRC() {
        this.crcStart = this.length;
    },

    /**
     *
     * @param w
     */
    writeByte: function writeByte(w) {
        if (this.length == this.array.length) {
            var oldArray = this.array;
            this.array = new Uint8Array(this.length * 2);
            this.array.set(oldArray, 0);
        }
        this.array[this.length++] = w;
    },

    writeBytes: function writeBytes(array) {
        var target = this.array,
            actualLength = target.length,
            length = this.length,
            acc = array.length;
        if (length + acc > actualLength) {
            while (length + acc > actualLength) {
                actualLength <<= 1;
            }
            this.array = new Uint8Array(actualLength);
            this.array.set(target, 0);
            target = this.array;
        }
        target.set(array, length);
        this.length += array.length;
    },

    /**
     *
     * @param w
     */
    writeWord: function writeWord(w) {
        this.writeByte(w >> 8);
        this.writeByte(w);
    },

    /**
     * Write a 16bit unsigned int in Lowest Significant First order.
     * @param w
     */
    writeWordLSB: function writeWordLSB(w) {
        this.writeByte(w);
        this.writeByte(w >> 8);
    },

    writeInt4: function writeInt4(w) {
        this.writeByte(w >> 24);
        this.writeByte(w >> 16);
        this.writeByte(w >> 8);
        this.writeByte(w);
    },

    writeType: function writeType(type) {
        this.writeByte(type.charCodeAt(0));
        this.writeByte(type.charCodeAt(1));
        this.writeByte(type.charCodeAt(2));
        this.writeByte(type.charCodeAt(3));
    },

    writeCRC: function writeCRC() {
        var crc = -1,
            array = this.array,
            length = this.length,
            map = PNGStream.__CRCLookupTable;

        for (var i = this.crcStart; i < length; i++) {
            crc = map[(crc ^ array[i]) & 0xff] ^ crc >> 8 & 0x00ffffff;
        }

        crc = crc ^ -1;
        this.writeInt4(crc);
    },

    /**
     * Write a general chunk.
     * @param type {String} type name
     * @param data
     */
    writeChunk: function writeChunk(type, data) {
        this.writeInt4(data.length);
        this.resetCRC();
        this.writeType(type);
        this.writeBytes(data);
        this.writeCRC();
    },

    /**
     * http://www.w3.org/TR/PNG/#11IHDR
     * @param width
     * @param height
     * @param depth
     * @param colorType
     * @param interlaceMethod {Number} 0 (no interlace, default) or 1 (Adam7 interlace)
     */
    writeIHDRChunk: function writeIHDRChunk(width, height, depth, colorType, interlaceMethod) {
        this.writeInt4(13);
        this.resetCRC();
        this.writeType("IHDR");
        if (!(width > 0)) {
            width = 1;
        }
        if (!(height > 0)) {
            height = 1;
        }
        this.writeInt4(width);
        this.writeInt4(height);

        // Available: 1, 2, 4, 8(default), 16
        this.writeByte(depth || 8);

        // Available: 0, 2, 3, 4, 6(default)
        this.writeByte(colorType === undefined ? 6 : colorType);

        // Compression Method.
        this.writeByte(0);

        // Filter Method.
        this.writeByte(0);

        // Interlace Method.
        this.writeByte(interlaceMethod);

        this.writeCRC();
    },

    /**
     * http://www.w3.org/TR/PNG/#11PLTE
     * @param depth
     * @param colorType
     * @param colors
     */
    writePLTEChunk: function writePLTEChunk(colorType, depth, colors) {
        // Calculate length
        this.writeInt4(colors.length * depth * 3 >> 3);
        this.resetCRC();
        this.writeType("PLTE");
        for (var i = 0; i < colors.length; i++) {
            this.writeByte(colors[i] >> 16);
            this.writeByte(colors[i] >> 8);
            this.writeByte(colors[i]);
        }
        this.writeCRC();
    },

    writeIDATChunk: function writeIDATChunk(data) {
        this.writeChunk("IDAT", data);
    },

    writeIENDChunk: function writeIENDChunk() {
        this.writeInt4(0);
        this.resetCRC();
        this.writeType("IEND");
        this.writeCRC();
    },

    /**
     * Return the Base64Encoding of the stream.
     * @return {String}
     */
    getBase64String: function getBase64String() {
        var a1,
            a2,
            a3,
            e3,
            e4,
            array = this.array,
            l = this.array.length,
            n = l - l % 3,
            r = [],
            k = 0;

        for (var i = 0; i < n; i += 3) {
            a1 = array[i];
            a2 = array[i + 1];
            a3 = array[i + 2];
            r.push(Base64Map.charAt(a1 >> 2) + Base64Map.charAt((a1 & 3) << 4 | a2 >> 4) + Base64Map.charAt((a2 & 0xf) << 2 | a3 >> 6) + Base64Map.charAt(a3 & 0x3f));
        }

        a1 = array[i];
        a2 = array[i + 1];
        a3 = array[i + 2];
        if (typeof a2 === 'undefined') {
            e3 = e4 = 64;
        } else {
            e3 = (a2 & 0xf) << 2 | a3 >> 6;
            if (typeof a3 === 'undefined') {
                e4 = 64;
            } else {
                e4 = a3 & 0x3f;
            }
        }
        r.push(Base64Map.charAt(a1 >> 2) + Base64Map.charAt((a1 & 3) << 4 | a2 >> 4) + Base64Map.charAt(e3) + Base64Map.charAt(e4));

        return r.join('');
    }
};

/**
 *
 * @type {Array}
 * @private
 */
PNGStream.__CRCLookupTable = (function () {
    var _crc32 = new Uint32Array(256);
    /* Create crc32 lookup table */
    for (var i = 0; i < 256; i++) {
        var c = i;
        for (var j = 0; j < 8; j++) {
            if (c & 1) {
                c = -306674912 ^ c >> 1 & 0x7fffffff;
            } else {
                c = c >> 1 & 0x7fffffff;
            }
        }
        _crc32[i] = c;
    }
    return _crc32;
})();

var PNGSignature = [137, 80, 78, 71, 13, 10, 26, 10];

function adler32(data, length) {
    // compute adler32 of output pixels + row filter bytes
    var MOD_ADLER = 65521;
    /* largest prime smaller than 65536 */
    var NMAX = 5552;
    /* NMAX is the largest n such that 255n(n+1)/2 + (n+1)(BASE-1) <= 2^32-1 */
    var a = 1;
    var b = 0;
    var n = NMAX;

    for (var i = 0; i < length; i++) {
        a += data[i];
        b += a;
        if ((n -= 1) == 0) {
            a %= MOD_ADLER;
            b %= MOD_ADLER;
            n = NMAX;
        }
    }
    a %= MOD_ADLER;
    b %= MOD_ADLER;
    return b << 16 | a;
}

/**
 * http://tools.ietf.org/html/rfc1950
 * http://tools.ietf.org/html/rfc1951 3.2.4
 * @param data
 */
function zlibNoCompression(data, length) {
    var buffer = new Uint8Array(2 + 4 + 5 * Math.ceil(length / 0xffff) + length),
        header = 8 + (7 << 4) << 8 | 3 << 6,
        continueHeader = [0, 0xff, 0xff, 0, 0],
        pos = 0,
        rest;
    header += 31 - header % 31;
    buffer[pos++] = header >> 8;
    buffer[pos++] = header;
    for (var i = 0; i + 0xffff < length; i += 0xffff) {
        buffer.set(continueHeader, pos);
        pos += 5;
        buffer.set(data.subarray(i, i + 0xffff), pos);
        pos += 0xffff;
    }
    rest = length - i;
    if (rest) {
        buffer[pos++] = 1;
        buffer[pos++] = rest & 0xff;
        buffer[pos++] = rest >> 8 & 0xff;
        rest = ~rest;
        buffer[pos++] = rest & 0xff;
        buffer[pos++] = rest >> 8 & 0xff;
        buffer.set(data.subarray(i), pos);
        pos += ~rest;
    }

    var checksum = adler32(data, length);
    buffer[pos++] = checksum >> 24;
    buffer[pos++] = checksum >> 16;
    buffer[pos++] = checksum >> 8;
    buffer[pos++] = checksum;
    return buffer;
}

function rowFilter(width, height, samples, image) {
    var result = new Uint8Array((width * samples + 1) * height),
        w = width * samples,
        pos = 0;
    for (var y = 0, j = 0; y < height; y++, j += w) {
        result[pos++] = 0;
        result.set(image.slice(j, j + w), pos);
        pos += w;
    }
    return result;
}

/**
 * Encode an RGBA list into UTF-8 PNG.
 *
 * @param image
 * @param width
 * @param height
 */

function encodeRGBAtoPNG(image, width, height) {
    var stream = new PNGStream();
    stream.writeIHDRChunk(width, height, 8, /* 8 bit depth*/6, /* True-color with alpha */0 /* No interlace */);
    image = rowFilter(width, height, 4, image);
    image = zlibNoCompression(image, image.length);
    stream.writeIDATChunk(image);
    stream.writeIENDChunk();
    return 'data:image/png;base64,' + stream.getBase64String();
}

// raster.encodeRGBAtoPNG = encodeRGBAtoPNG;

},{}]},{},[18])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL21hdGgvc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvbnVtYmVyL2Vwc2lsb24uanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2suanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vbWF0aC9zaWduLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9udW1iZXIvZXBzaWxvbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmEtZnVuY3Rpb24uanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jb3JlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY3R4LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZXhwb3J0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZ2xvYmFsLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5tYXRoLXNpZ24uanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm1hdGguc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYubnVtYmVyLmVwc2lsb24uanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9kYXRhMmltYWdlL3NyYy9EYXRhMkltYWdlLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZGF0YTJpbWFnZS9zcmMvY29tbW9uLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZGF0YTJpbWFnZS9zcmMvZGVjb2RlLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZGF0YTJpbWFnZS9zcmMvZW5jb2RlLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZGF0YTJpbWFnZS9zcmMvcmFzdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QztBQUM3QixVQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDeEIsV0FBTyx3QkFBd0IsR0FBRyxNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7Q0FDOUQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL21hdGgvc2lnblwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9udW1iZXIvZXBzaWxvblwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5XCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5XCIpW1wiZGVmYXVsdFwiXTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcblxuICAgICAgX09iamVjdCRkZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9O1xufSkoKTtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5tYXRoLnNpZ24nKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5NYXRoLnNpZ247IiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYubnVtYmVyLmVwc2lsb24nKTtcbm1vZHVsZS5leHBvcnRzID0gTWF0aC5wb3coMiwgLTUyKTsiLCJ2YXIgJCA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvJCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXtcbiAgcmV0dXJuICQuc2V0RGVzYyhpdCwga2V5LCBkZXNjKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7XG4gIHJldHVybiBpdDtcbn07IiwidmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMS4yLjYnfTtcbmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZiIsIi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xudmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vJC5hLWZ1bmN0aW9uJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpe1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuO1xuICBzd2l0Y2gobGVuZ3RoKXtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpO1xuICAgIH07XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59OyIsInZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuLyQuZ2xvYmFsJylcbiAgLCBjb3JlICAgICAgPSByZXF1aXJlKCcuLyQuY29yZScpXG4gICwgY3R4ICAgICAgID0gcmVxdWlyZSgnLi8kLmN0eCcpXG4gICwgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG5cbnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXtcbiAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkZcbiAgICAsIElTX0dMT0JBTCA9IHR5cGUgJiAkZXhwb3J0LkdcbiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlNcbiAgICAsIElTX1BST1RPICA9IHR5cGUgJiAkZXhwb3J0LlBcbiAgICAsIElTX0JJTkQgICA9IHR5cGUgJiAkZXhwb3J0LkJcbiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LldcbiAgICAsIGV4cG9ydHMgICA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pXG4gICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdXG4gICAgLCBrZXksIG93biwgb3V0O1xuICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTtcbiAgZm9yKGtleSBpbiBzb3VyY2Upe1xuICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZVxuICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIGtleSBpbiB0YXJnZXQ7XG4gICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlO1xuICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkXG4gICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTtcbiAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXNcbiAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XVxuICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0XG4gICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbClcbiAgICAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeVxuICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7XG4gICAgICB2YXIgRiA9IGZ1bmN0aW9uKHBhcmFtKXtcbiAgICAgICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBDID8gbmV3IEMocGFyYW0pIDogQyhwYXJhbSk7XG4gICAgICB9O1xuICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdO1xuICAgICAgcmV0dXJuIEY7XG4gICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzXG4gICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0O1xuICAgIGlmKElTX1BST1RPKShleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KSlba2V5XSA9IG91dDtcbiAgfVxufTtcbi8vIHR5cGUgYml0bWFwXG4kZXhwb3J0LkYgPSAxOyAgLy8gZm9yY2VkXG4kZXhwb3J0LkcgPSAyOyAgLy8gZ2xvYmFsXG4kZXhwb3J0LlMgPSA0OyAgLy8gc3RhdGljXG4kZXhwb3J0LlAgPSA4OyAgLy8gcHJvdG9cbiRleHBvcnQuQiA9IDE2OyAvLyBiaW5kXG4kZXhwb3J0LlcgPSAzMjsgLy8gd3JhcFxubW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0OyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG52YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGhcbiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuaWYodHlwZW9mIF9fZyA9PSAnbnVtYmVyJylfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYiLCJ2YXIgJE9iamVjdCA9IE9iamVjdDtcbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGU6ICAgICAkT2JqZWN0LmNyZWF0ZSxcbiAgZ2V0UHJvdG86ICAgJE9iamVjdC5nZXRQcm90b3R5cGVPZixcbiAgaXNFbnVtOiAgICAge30ucHJvcGVydHlJc0VudW1lcmFibGUsXG4gIGdldERlc2M6ICAgICRPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICBzZXREZXNjOiAgICAkT2JqZWN0LmRlZmluZVByb3BlcnR5LFxuICBzZXREZXNjczogICAkT2JqZWN0LmRlZmluZVByb3BlcnRpZXMsXG4gIGdldEtleXM6ICAgICRPYmplY3Qua2V5cyxcbiAgZ2V0TmFtZXM6ICAgJE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICBnZXRTeW1ib2xzOiAkT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxcbiAgZWFjaDogICAgICAgW10uZm9yRWFjaFxufTsiLCIvLyAyMC4yLjIuMjggTWF0aC5zaWduKHgpXG5tb2R1bGUuZXhwb3J0cyA9IE1hdGguc2lnbiB8fCBmdW5jdGlvbiBzaWduKHgpe1xuICByZXR1cm4gKHggPSAreCkgPT0gMCB8fCB4ICE9IHggPyB4IDogeCA8IDAgPyAtMSA6IDE7XG59OyIsIi8vIDIwLjIuMi4yOCBNYXRoLnNpZ24oeClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7c2lnbjogcmVxdWlyZSgnLi8kLm1hdGgtc2lnbicpfSk7IiwiLy8gMjAuMS4yLjEgTnVtYmVyLkVQU0lMT05cbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHtFUFNJTE9OOiBNYXRoLnBvdygyLCAtNTIpfSk7IiwiXG5pbXBvcnQgeyBlbmNvZGVWYWx1ZSB9IGZyb20gJy4vZW5jb2RlJztcbmltcG9ydCB7IGdldERlY29kZUZ1bmN0aW9uRm9yIH0gZnJvbSAnLi9kZWNvZGUnO1xuaW1wb3J0IHsgZW5jb2RlUkdCQXRvUE5HIH0gZnJvbSAnLi9yYXN0ZXInO1xuLy8gQ2xhc3NcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhdGEySW1hZ2Uge1xuXHRjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0dGhpcy5lbGVtZW50cyA9IFtdO1xuXHRcdHRoaXMuaW5zdGFuY2VzID0gMDtcblx0fVxuXG5cdGFkZEVsZW1lbnQgKG5hbWUsIHR5cGUsIHBvcHVsYXRlX2NhbGxiYWNrLCByYW5nZSkge1xuXHRcdHRoaXMuZWxlbWVudHMucHVzaCh7IGlkOiB0aGlzLmVsZW1lbnRzLmxlbmd0aCwgbmFtZTogbmFtZSwgdHlwZTogdHlwZSwgcmFuZ2U6IHJhbmdlLCBmaWxsOiBwb3B1bGF0ZV9jYWxsYmFjayB9KTtcblx0fVxuXG5cdGdldFRvdGFsRWxlbWVudHMgKCkge1xuXHRcdHJldHVybiB0aGlzLmVsZW1lbnRzLmxlbmd0aDtcblx0fVxuXG5cdHNldFRvdGFsSW5zdGFuY2VzIChudW1iZXIpIHtcblx0XHR0aGlzLmluc3RhbmNlcyA9IG51bWJlcjtcblx0fVxuXG5cdGdldFRvdGFsSW5zdGFuY2VzICgpIHtcblx0XHRyZXR1cm4gdGhpcy5pbnN0YW5jZXM7XG5cdH1cblxuXHRnZXRUYWJsZVNpemUgKCkge1xuXHRcdHJldHVybiBbdGhpcy5nZXRUb3RhbEluc3RhbmNlcygpLCB0aGlzLmdldFRvdGFsRWxlbWVudHMoKV07XG5cdH1cblxuXHRnZXRVcmwgKCkge1xuXHRcdGxldCB3aWR0aCA9IHRoaXMuZ2V0VG90YWxJbnN0YW5jZXMoKTtcblx0XHRsZXQgaGVpZ2h0ID0gdGhpcy5nZXRUb3RhbEVsZW1lbnRzKCk7XG5cblx0ICAgIGxldCBjaGFubmVscyA9IDQ7XG5cdCAgICBsZXQgcmdiYSA9IG5ldyBBcnJheSh3aWR0aCAqIGhlaWdodCAqIGNoYW5uZWxzKTtcblx0ICAgIGxldCBpbmRleCwgciwgaSwgdjtcdFxuXHQgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuXHQgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuXHQgICAgICAgICAgICBpbmRleCA9ICh5KndpZHRoK3gpKmNoYW5uZWxzO1xuXHQgICAgICAgICAgICB2ID0gdGhpcy5lbGVtZW50c1t5XS5maWxsKHgsIHRoaXMuZWxlbWVudHNbeV0pO1xuXHRcdFx0XHRsZXQgdmFsdWUgPSBlbmNvZGVWYWx1ZSh2LCB0aGlzLmVsZW1lbnRzW3ldLnR5cGUsIHRoaXMuZWxlbWVudHNbeV0ucmFuZ2UpO1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgY2hhbm5lbHM7IGkrKykge1xuXHRcdFx0XHRcdHJnYmFbaW5kZXgraV0gPSB2YWx1ZVtpXTtcblx0XHRcdFx0fVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBlbmNvZGVSR0JBdG9QTkcocmdiYSwgd2lkdGgsIGhlaWdodCk7XG5cdH1cblxuXHRnZXRJbWcgKCkge1xuXHRcdGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiSU1HXCIpO1xuXHRcdGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuZ2V0VXJsKCkpO1xuXHRcdHJldHVybiBpbWc7XG5cdH0gXG5cblx0dmVyc2lvbiAoKSB7XG4gICAgICAgIHJldHVybiAnMC4wLjMnO1xuICAgIH1cbn1cblxud2luZG93LkRhdGEySW1hZ2UgPSBEYXRhMkltYWdlOyIsImV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWx1ZSwgbWluLCBtYXgpIHtcblx0Ly8gcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCB2YWx1ZSkpOyAvLyBmYXN0ZXI/P1xuXHRyZXR1cm4gKHZhbHVlID4gbWF4ID8gbWF4IDogdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXAodmFsdWUsIGlucHV0TWluLCBpbnB1dE1heCwgb3V0cHV0TWluLCBvdXRwdXRNYXgsIGNsYW1wID0gdHJ1ZSApIHtcbiAgICBpZiAoTWF0aC5hYnMoaW5wdXRNaW4gLSBpbnB1dE1heCkgPCBOdW1iZXIuRVBTSUxPTikge1xuICAgICAgICByZXR1cm4gb3V0cHV0TWluO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvdXRWYWwgPSAoKHZhbHVlIC0gaW5wdXRNaW4pIC8gKGlucHV0TWF4IC0gaW5wdXRNaW4pICogKG91dHB1dE1heCAtIG91dHB1dE1pbikgKyBvdXRwdXRNaW4pO1xuICAgICAgICBpZiAoY2xhbXApIHtcbiAgICAgICAgICAgIGlmIChvdXRwdXRNYXggPCBvdXRwdXRNaW4pIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0VmFsIDwgb3V0cHV0TWF4KSB7XG4gICAgICAgICAgICAgICAgXHRvdXRWYWwgPSBvdXRwdXRNYXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYoIG91dFZhbCA+IG91dHB1dE1pbiApIHtcbiAgICAgICAgICAgICAgICBcdG91dFZhbCA9IG91dHB1dE1pbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG91dFZhbCA+IG91dHB1dE1heCkge1xuICAgICAgICAgICAgICAgIFx0b3V0VmFsID0gb3V0cHV0TWF4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKCBvdXRWYWwgPCBvdXRwdXRNaW4gKSB7XG4gICAgICAgICAgICAgICAgXHRvdXRWYWwgPSBvdXRwdXRNaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRWYWw7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVjaW1hbHMobnVtYmVyKSB7XG5cdGxldCBtYXRjaCA9IChNYXRoLmFicyhudW1iZXIpICsgJycpLm1hdGNoKC9cXGQrXFwuKFxcZCspLyk7XG5cdHJldHVybiBtYXRjaD8gbWF0Y2hbMV0ubGVuZ3RoIDogMDtcbn0iLCJpbXBvcnQgeyBnZXRSYW5nZUZvciB9IGZyb20gJy4vZW5jb2RlJztcblxudmFyIGNvbW1vbiA9IGBcbnZlYzIgZ2V0Q29vcmQodmVjMiByZXMsIGZsb2F0IGNvbCwgZmxvYXQgcm93KSB7XG4gICAgcmV0dXJuIGZyYWN0KHZlYzIoY29sLHJvdysuNSkvcmVzKTtcbn1gKydcXG4nO1xuXG52YXIgdWludCA9IGNvbW1vbiArIGBcbmZsb2F0IGdldFVJbnQoc2FtcGxlcjJEIHRleCwgdmVjMiByZXMsIGZsb2F0IGNvbCwgZmxvYXQgcm93KSB7XG4gICAgaGlnaHAgdmVjNCB2YWx1ZSA9IHRleHR1cmUyRCh0ZXgsIGNvb3JkKTtcbiAgICByZXR1cm4gKHZhbHVlLngqMjU1LikrKHZhbHVlLnkqNjUwMjUuKSsodmFsdWUueioxNjU4MTM3NS4pO1xufWA7XG5cbnZhciB1ZmxvYXQgPSBjb21tb24gKyBgXG5mbG9hdCBnZXRVRmxvYXQoc2FtcGxlcjJEIHRleCwgdmVjMiByZXMsIGZsb2F0IGNvbCwgZmxvYXQgcm93KSB7XG4gICAgaGlnaHAgdmVjNCB2YWx1ZSA9IHRleHR1cmUyRCh0ZXgsIGNvb3JkKTtcbiAgICByZXR1cm4gKCh2YWx1ZS54KjI1NS4pKyh2YWx1ZS55KjY1MDI1LikrKHZhbHVlLnoqMTY1ODEzNzUuKSkvMTY1ODEzNzUuO1xufWA7XG5cbnZhciBwb3NpdGlvbiA9IGNvbW1vbiArIGBcbnZlYzIgZ2V0UG9zaXRpb24oc2FtcGxlcjJEIHRleCwgdmVjMiByZXMsIGZsb2F0IGNvbCwgZmxvYXQgcm93KSB7XG4gICAgdmVjMiBjb29yZCA9IGdldENvb3JkKHJlcywgY29sLCByb3cpO1xuICAgIGhpZ2hwIHZlYzQgdmFsdWUgPSB0ZXh0dXJlMkQodGV4LCBjb29yZCk7XG4gICAgZmxvYXQgeCA9ICh2YWx1ZS5yKjI1NSt2YWx1ZS5nKjY1MDI1LikvNjUwMjUuO1xuICAgIGZsb2F0IHkgPSAodmFsdWUuYioyNTUuK3ZhbHVlLmEqNjUwMjUuKS82NTAyNS47XG4gICAgcmV0dXJuIHZlYzIoeCx5KTtcbn1gKydcXG4nO1xuXG52YXIgY29sb3IgPSBjb21tb24gKyBgXG52ZWM0IGdldENvbG9yKHNhbXBsZXIyRCB0ZXgsIHZlYzIgcmVzLCBmbG9hdCBjb2wsIGZsb2F0IHJvdykge1xuICAgIHZlYzIgY29vcmQgPSBnZXRDb29yZChyZXMsIGNvbCwgcm93KTtcbiAgICByZXR1cm4gdGV4dHVyZTJEKHRleCwgY29vcmQpO1xufWArJ1xcbic7XG5cbnZhciBkZWNvZGUgPSB7XG4gICAgdWludDogdWludCxcbiAgICBpbnQ6IHVpbnQgKyBgXG5mbG9hdCBnZXRJbnQoc2FtcGxlcjJEIHRleCwgdmVjMiByZXMsIGZsb2F0IGNvbCwgZmxvYXQgcm93KSB7XG4gICAgcmV0dXJuIGdldFVJbnQodGV4LHJlcyxjb2wscm93KS04MjkwNjg4Ljtcbn1gLFxuICAgIHVmbG9hdDogdWZsb2F0LFxuICAgIGZsb2F0OiB1ZmxvYXQgKyBgXG5mbG9hdCBnZXRVRmxvYXQoc2FtcGxlcjJEIHRleCwgdmVjMiByZXMsIGZsb2F0IGNvbCwgZmxvYXQgcm93KSB7XG4gICAgcmV0dXJuIChnZXRVRmxvYXQodGV4LHJlcyxjb2wscm93KS0uNSkqMi47XG59YCxcbiAgICBudW1iZXI6IGNvbW1vbiArIGBcbnZlYzMgZ2V0RWxlbWVudHMoc2FtcGxlcjJEIHRleCwgdmVjMiBjb29yZCkge1xuICAgIGhpZ2hwIHZlYzQgdmFsdWUgPSB0ZXh0dXJlMkQodGV4LCBjb29yZCk7XG4gICAgaGlnaHAgZmxvYXQgdWludCA9ICh2YWx1ZS54KjI1NS4pKyh2YWx1ZS55KjY1MDI1LikrKHZhbHVlLnoqMTY1ODEzNzUuKTtcbiAgICBmbG9hdCBwcmVzcyA9IGNlaWwodmFsdWUuYSoyNTUuKS0yNDQuO1xuICAgIHJldHVybiB2ZWMzKHVpbnQsIGFicyhwcmVzcyksIHNpZ24ocHJlc3MpKTtcbn1cbmZsb2F0IGdldE51bWJlcihzYW1wbGVyMkQgdGV4LCB2ZWMyIHJlcywgZmxvYXQgY29sLCBmbG9hdCByb3cpIHtcbiAgICB2ZWMyIGNvb3JkID0gZ2V0Q29vcmQocmVzLCBjb2wsIHJvdyk7XG4gICAgaGlnaHAgdmVjMyBlbGVtZW50cyA9IGdldEVsZW1lbnRzKHRleCwgY29vcmQpO1xuICAgIHJldHVybiBlbGVtZW50cy54ICogcG93KDEwLiwtZmxvb3IoZWxlbWVudHMueSkpICogZWxlbWVudHMuejtcbn1gKydcXG4nLFxuICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICBjb2xvcjogY29sb3IsXG4gICAgcmdiOiBjb2xvcixcbiAgICB2ZWMyOiBwb3NpdGlvbixcbiAgICB2ZWMzOiBjb2xvcixcbiAgICB2ZWM0OiBjb2xvclxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVjb2RlRnVuY3Rpb25Gb3IgKHR5cGUpIHtcbiAgICByZXR1cm4gZGVjb2RlW3R5cGVdO1xufVxuXG53aW5kb3cuZ2V0RGVjb2RlRnVuY3Rpb25Gb3IgPSBnZXREZWNvZGVGdW5jdGlvbkZvcjsiLCJpbXBvcnQgeyBjbGFtcCwgbWFwLCBkZWNpbWFscyB9IGZyb20gJy4vY29tbW9uJztcblxuLy8gRGVmYXVsdCBSYW5nZXNcbnZhciByYW5nZXMgPSB7XG5cdG51bWJlcjogWy0xNjU4MTM3NSwxNjU4MTM3NV0sXG5cdGNoYXI6IFx0Wy0xMjgsIDEyN10sXG5cdHVjaGFyOiBcdFswLCAyNTVdLFxuXHRpbnQ6IFx0Wy04MjkwNjg4LCA4MjkwNjg3XSxcblx0dWludDogXHRbMCwgMTY1ODEzNzVdLFxuXHRmbG9hdDogXHRbLTEsIDFdLFxuXHR1ZmxvYXQ6IFswLCAxXSxcblx0cG9zaXRpb246IFstMSwgMV0sXG5cdGNvbG9yOiBcdFswLCAyNTVdLFxuXHRyZ2I6IFx0WzAsIDI1NV0sXG5cdHZlYzI6IFx0Wy0xLCAxXSxcblx0dmVjMzogXHRbLTEsIDFdLFxuXHR2ZWM0OiBcdFstMSwgMV1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5nZUZvciAodHlwZSkge1xuXHRyZXR1cm4gcmFuZ2VzW3R5cGVdO1xufVxuXG5mdW5jdGlvbiBjbGFtcFZhbHVlICh2YWx1ZSwgcmFuZ2UpIHtcblx0aWYgKHZhbHVlIDwgcmFuZ2VbMF0gfHwgdmFsdWUgPiByYW5nZVsxXSkge1xuXHRcdGNvbnNvbGUud2FybignVmFsdWUnLHZhbHVlLCdpcyBvdXQgb2YgcmFuZ2UnLHJhbmdlLCd3aWxsIGJlIGNsYW1wZWQgdG8nLCBjbGFtcCh2YWx1ZSxyYW5nZVswXSxyYW5nZVsxXSkpO1xuXHRcdHJldHVybiBjbGFtcCh2YWx1ZSxyYW5nZVswXSxyYW5nZVsxXSk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlICh2YWx1ZSwgcmFuZ2UpIHtcblx0cmV0dXJuIG1hcCh2YWx1ZSxyYW5nZVswXSxyYW5nZVsxXSwwLDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlVmFsdWUgKHZhbHVlLCB0eXBlLCByYW5nZSkge1xuXHRpZiAoIXJhbmdlKSB7XG5cdFx0cmFuZ2UgPSBnZXRSYW5nZUZvcih0eXBlKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG5cdFx0dmFsdWUgPSBjbGFtcFZhbHVlKHZhbHVlLCByYW5nZSk7XG5cdFx0aWYgKHR5cGUgIT09ICdudW1iZXInKSB7XG5cdFx0XHQvLyBcIk51bWJlclwiIHR5cGUgZG9uJ3QgbmVlZCBub3JtYWxpenRpb24gYmVjYXVzZSB0cmllcyB0byBzZXQgdGhlIHByZXNpdGlvbiBkaW5hbWljYWxseVxuXHRcdFx0dmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSwgcmFuZ2UpO1xuXHRcdH1cblx0fSBcblx0ZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRmb3IgKGxldCBpIGluIHZhbHVlKSB7XG5cdFx0XHR2YWx1ZVtpXSA9IGNsYW1wVmFsdWUodmFsdWVbaV0sIHJhbmdlKTtcblx0XHRcdGlmICh0eXBlICE9PSAnbnVtYmVyJykge1xuXHRcdFx0XHQvLyBcIk51bWJlclwiIHR5cGUgZG9uJ3QgbmVlZCBub3JtYWxpenRpb24gYmVjYXVzZSB0cmllcyB0byBzZXQgdGhlIHByZXNpdGlvbiBkaW5hbWljYWxseVxuXHRcdFx0XHR2YWx1ZVtpXSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlW2ldLCByYW5nZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IFxuXHRlbHNlIHtcblx0XHRjb25zb2xlLmxvZygnVmFsdWUgdHlwZSBjb3VsZCBub3QgYmUgcmVhZCcsIHZhbHVlLCB0eXBlLCByYW5nZSk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdFxuXHRpZiAodHlwZSA9PT0gJ3VjaGFyJyB8fCB0eXBlID09PSAnY2hhcicpIHtcblx0XHR2YWx1ZSAqPSAyNTU7XG5cdCAgICByZXR1cm4gW1xuXHQgICAgICAgIE1hdGguZmxvb3IodmFsdWUpLFxuXHQgICAgICAgIE1hdGguZmxvb3IodmFsdWUpLFxuXHQgICAgICAgIE1hdGguZmxvb3IodmFsdWUpLFxuXHQgICAgICAgIDI1NVxuXHQgICAgXTtcblx0fVxuXHRlbHNlIGlmICh0eXBlID09PSAnaW50JyB8fCB0eXBlID09PSAndWludCcgIHx8IHR5cGUgPT09ICdmbG9hdCcgfHwgdHlwZSA9PT0gJ3VmbG9hdCcpIHtcblx0XHR2YWx1ZSA9IHZhbHVlKjE2NTgxMzc1O1xuXHQgICAgcmV0dXJuIFtcblx0ICAgICAgICBNYXRoLmZsb29yKHZhbHVlJTI1NSksXG5cdCAgICAgICAgTWF0aC5mbG9vcih2YWx1ZS8yNTUpJTI1NSxcblx0ICAgICAgICBNYXRoLmZsb29yKHZhbHVlLygyNTUqMjU1KSksXG5cdCAgICAgICAgMjU1XG5cdCAgICBdO1xuXHR9XG5cdGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0bGV0IHMgPSBNYXRoLnNpZ24odmFsdWUpO1xuXHRcdGxldCBkID0gZGVjaW1hbHModmFsdWUpKzEuO1xuXHRcdGxldCB1aW50ID0gTWF0aC5hYnModmFsdWUpICogTWF0aC5wb3coMTAsZCk7XHQvLyB0cmFuc2Zvcm0gdGhlIG51bWJlciBpbnRvIHVuc2lnbmVkIGludGVnZXJzXG5cdFx0bGV0IHByZXMgPSAyNDQgKyBkKnM7XG5cdFx0Ly8gY29uc29sZS5sb2coXCJWYWx1ZTpcIix2YWx1ZSxcIlM6XCIscyxcIkQ6XCIsZCxcIlVpbnQ6XCIsdWludCxcIlByZXNzOlwiLHByZXMpO1xuXHQgICAgcmV0dXJuIFtcblx0ICAgICAgICBNYXRoLmZsb29yKHVpbnQpJTI1NSxcblx0ICAgICAgICBNYXRoLmZsb29yKHVpbnQvMjU1KSUyNTUsXG5cdCAgICAgICAgTWF0aC5mbG9vcih1aW50LzY1MDI1KSUyNTUsXG5cdCAgICAgICAgTWF0aC5mbG9vcihwcmVzKSUyNTVcblx0ICAgIF07XG5cdH1cblx0ZWxzZSBpZiAodHlwZSA9PT0gJ3Bvc2l0aW9uJyB8fCB0eXBlID09PSAndmVjMicpIHtcdFx0XHRcdFxuXHRcdGxldCB4ID0gdmFsdWVbMF0qNjUwMjU7XG5cdFx0bGV0IHkgPSB2YWx1ZVsxXSo2NTAyNTtcblx0XHRyZXR1cm4gW1xuXHRcdFx0TWF0aC5mbG9vcih4JTI1NSksXG5cdCAgICAgICAgTWF0aC5mbG9vcih4LzI1NSklMjU1LFxuXHQgICAgICAgIE1hdGguZmxvb3IoeSUyNTUpLFxuXHQgICAgICAgIE1hdGguZmxvb3IoeS8yNTUpJTI1NVxuXHQgICAgXTtcblx0fVxuXHRlbHNlIGlmICh0eXBlID09PSAnY29sb3InIHx8IHR5cGUgPT09ICdyZ2InIHx8IHR5cGUgPT09ICd2ZWMzJyB8fCB0eXBlID09PSAndmVjNCcpIHtcblx0XHRyZXR1cm4gW1xuXHQgICAgICAgIE1hdGguZmxvb3IodmFsdWVbMF0qMjU1KSxcblx0ICAgICAgICBNYXRoLmZsb29yKHZhbHVlWzFdKjI1NSksXG5cdCAgICAgICAgTWF0aC5mbG9vcih2YWx1ZVsyXSoyNTUpLFxuXHQgICAgICAgIHZhbHVlWzNdID8gTWF0aC5mbG9vcih2YWx1ZVszXSoyNTUpOiAyNTVcblx0ICAgIF07XG5cdH1cbn1cblxud2luZG93LmdldFJhbmdlRm9yID0gZ2V0UmFuZ2VGb3I7IiwiLyoqXG4gKiBAYXV0aG9yIEJlaSBaSEFORyA8aWthcmllbmF0b3JAZ21haWwuY29tPiBodHRwOi8vdHdicy5pbi9cbiAqXG4gKiBDb3B5cmlnaHQgw4LCqSAyMDEyIEJlaSBaSEFORyA8aWthcmllbmF0b3JAZ21haWwuY29tPi4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuICogYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICpcbiAqIDEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICogbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKlxuICogMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICogdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3JcbiAqIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKlxuICogMy4gVGhlIG5hbWUgb2YgdGhlIGF1dGhvciBtYXkgbm90IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWRcbiAqIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIEJlaSBaSEFORyBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRURcbiAqIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GXG4gKiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELlxuICogSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLFxuICogU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLFxuICogUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7XG4gKiBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUlxuICogSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lOR1xuICogSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GXG4gKiBTVUNIIERBTUFHRS5cbiAqL1xuXG52YXIgQmFzZTY0TWFwID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuXG5mdW5jdGlvbiBQTkdTdHJlYW0oKSB7XG4gICAgdGhpcy5hcnJheSA9IG5ldyBVaW50OEFycmF5KFBOR1NpZ25hdHVyZSk7XG4gICAgdGhpcy5sZW5ndGggPSB0aGlzLmFycmF5Lmxlbmd0aDtcbiAgICB0aGlzLmNyY1N0YXJ0ID0gMDtcbn1cblxuUE5HU3RyZWFtLnByb3RvdHlwZSA9IHtcblxuICAgIHJlc2V0Q1JDOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY3JjU3RhcnQgPSB0aGlzLmxlbmd0aDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd1xuICAgICAqL1xuICAgIHdyaXRlQnl0ZTogZnVuY3Rpb24gKHcpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IHRoaXMuYXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgb2xkQXJyYXkgPSB0aGlzLmFycmF5O1xuICAgICAgICAgICAgdGhpcy5hcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoICogMik7XG4gICAgICAgICAgICB0aGlzLmFycmF5LnNldChvbGRBcnJheSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnJheVt0aGlzLmxlbmd0aCsrXSA9IHc7XG4gICAgfSxcblxuICAgIHdyaXRlQnl0ZXM6IGZ1bmN0aW9uIChhcnJheSkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5hcnJheSxcbiAgICAgICAgICAgIGFjdHVhbExlbmd0aCA9IHRhcmdldC5sZW5ndGgsXG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aCxcbiAgICAgICAgICAgIGFjYyA9IGFycmF5Lmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCArIGFjYyA+IGFjdHVhbExlbmd0aCkge1xuICAgICAgICAgICAgd2hpbGUgKGxlbmd0aCArIGFjYyA+IGFjdHVhbExlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFjdHVhbExlbmd0aCA8PD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXJyYXkgPSBuZXcgVWludDhBcnJheShhY3R1YWxMZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5hcnJheS5zZXQodGFyZ2V0LCAwKTtcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuYXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0LnNldChhcnJheSwgbGVuZ3RoKTtcbiAgICAgICAgdGhpcy5sZW5ndGggKz0gYXJyYXkubGVuZ3RoO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB3XG4gICAgICovXG4gICAgd3JpdGVXb3JkOiBmdW5jdGlvbiAodykge1xuICAgICAgICB0aGlzLndyaXRlQnl0ZSh3ID4+IDgpO1xuICAgICAgICB0aGlzLndyaXRlQnl0ZSh3KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogV3JpdGUgYSAxNmJpdCB1bnNpZ25lZCBpbnQgaW4gTG93ZXN0IFNpZ25pZmljYW50IEZpcnN0IG9yZGVyLlxuICAgICAqIEBwYXJhbSB3XG4gICAgICovXG4gICAgd3JpdGVXb3JkTFNCOiBmdW5jdGlvbiAodykge1xuICAgICAgICB0aGlzLndyaXRlQnl0ZSh3KTtcbiAgICAgICAgdGhpcy53cml0ZUJ5dGUodyA+PiA4KTtcbiAgICB9LFxuXG4gICAgd3JpdGVJbnQ0OiBmdW5jdGlvbiAodykge1xuICAgICAgICB0aGlzLndyaXRlQnl0ZSh3ID4+IDI0KTtcbiAgICAgICAgdGhpcy53cml0ZUJ5dGUodyA+PiAxNik7XG4gICAgICAgIHRoaXMud3JpdGVCeXRlKHcgPj4gOCk7XG4gICAgICAgIHRoaXMud3JpdGVCeXRlKHcpO1xuICAgIH0sXG5cbiAgICB3cml0ZVR5cGU6IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHRoaXMud3JpdGVCeXRlKHR5cGUuY2hhckNvZGVBdCgwKSk7XG4gICAgICAgIHRoaXMud3JpdGVCeXRlKHR5cGUuY2hhckNvZGVBdCgxKSk7XG4gICAgICAgIHRoaXMud3JpdGVCeXRlKHR5cGUuY2hhckNvZGVBdCgyKSk7XG4gICAgICAgIHRoaXMud3JpdGVCeXRlKHR5cGUuY2hhckNvZGVBdCgzKSk7XG4gICAgfSxcblxuICAgIHdyaXRlQ1JDOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjcmMgPSAtMSxcbiAgICAgICAgICAgIGFycmF5ID0gdGhpcy5hcnJheSxcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoLFxuICAgICAgICAgICAgbWFwID0gUE5HU3RyZWFtLl9fQ1JDTG9va3VwVGFibGU7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuY3JjU3RhcnQ7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY3JjID0gbWFwWyhjcmMgXiBhcnJheVtpXSkgJiAweGZmXSBeICgoY3JjID4+IDgpICYgMHgwMGZmZmZmZik7XG4gICAgICAgIH1cblxuICAgICAgICBjcmMgPSBjcmMgXiAtMTtcbiAgICAgICAgdGhpcy53cml0ZUludDQoY3JjKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogV3JpdGUgYSBnZW5lcmFsIGNodW5rLlxuICAgICAqIEBwYXJhbSB0eXBlIHtTdHJpbmd9IHR5cGUgbmFtZVxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICovXG4gICAgd3JpdGVDaHVuazogZnVuY3Rpb24gKHR5cGUsIGRhdGEpIHtcbiAgICAgICAgdGhpcy53cml0ZUludDQoZGF0YS5sZW5ndGgpO1xuICAgICAgICB0aGlzLnJlc2V0Q1JDKCk7XG4gICAgICAgIHRoaXMud3JpdGVUeXBlKHR5cGUpO1xuICAgICAgICB0aGlzLndyaXRlQnl0ZXMoZGF0YSk7XG4gICAgICAgIHRoaXMud3JpdGVDUkMoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogaHR0cDovL3d3dy53My5vcmcvVFIvUE5HLyMxMUlIRFJcbiAgICAgKiBAcGFyYW0gd2lkdGhcbiAgICAgKiBAcGFyYW0gaGVpZ2h0XG4gICAgICogQHBhcmFtIGRlcHRoXG4gICAgICogQHBhcmFtIGNvbG9yVHlwZVxuICAgICAqIEBwYXJhbSBpbnRlcmxhY2VNZXRob2Qge051bWJlcn0gMCAobm8gaW50ZXJsYWNlLCBkZWZhdWx0KSBvciAxIChBZGFtNyBpbnRlcmxhY2UpXG4gICAgICovXG4gICAgd3JpdGVJSERSQ2h1bms6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0LCBkZXB0aCwgY29sb3JUeXBlLCBpbnRlcmxhY2VNZXRob2QpIHtcbiAgICAgICAgdGhpcy53cml0ZUludDQoMTMpO1xuICAgICAgICB0aGlzLnJlc2V0Q1JDKCk7XG4gICAgICAgIHRoaXMud3JpdGVUeXBlKFwiSUhEUlwiKTtcbiAgICAgICAgaWYgKCEod2lkdGggPiAwKSkge1xuICAgICAgICAgICAgd2lkdGggPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGhlaWdodCA+IDApKSB7XG4gICAgICAgICAgICBoZWlnaHQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdGVJbnQ0KHdpZHRoKTtcbiAgICAgICAgdGhpcy53cml0ZUludDQoaGVpZ2h0KTtcblxuICAgICAgICAvLyBBdmFpbGFibGU6IDEsIDIsIDQsIDgoZGVmYXVsdCksIDE2XG4gICAgICAgIHRoaXMud3JpdGVCeXRlKGRlcHRoIHx8IDgpO1xuXG4gICAgICAgIC8vIEF2YWlsYWJsZTogMCwgMiwgMywgNCwgNihkZWZhdWx0KVxuICAgICAgICB0aGlzLndyaXRlQnl0ZShjb2xvclR5cGUgPT09IHVuZGVmaW5lZCA/IDYgOiBjb2xvclR5cGUpO1xuXG4gICAgICAgIC8vIENvbXByZXNzaW9uIE1ldGhvZC5cbiAgICAgICAgdGhpcy53cml0ZUJ5dGUoMCk7XG5cbiAgICAgICAgLy8gRmlsdGVyIE1ldGhvZC5cbiAgICAgICAgdGhpcy53cml0ZUJ5dGUoMCk7XG5cbiAgICAgICAgLy8gSW50ZXJsYWNlIE1ldGhvZC5cbiAgICAgICAgdGhpcy53cml0ZUJ5dGUoaW50ZXJsYWNlTWV0aG9kKTtcblxuICAgICAgICB0aGlzLndyaXRlQ1JDKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGh0dHA6Ly93d3cudzMub3JnL1RSL1BORy8jMTFQTFRFXG4gICAgICogQHBhcmFtIGRlcHRoXG4gICAgICogQHBhcmFtIGNvbG9yVHlwZVxuICAgICAqIEBwYXJhbSBjb2xvcnNcbiAgICAgKi9cbiAgICB3cml0ZVBMVEVDaHVuazogZnVuY3Rpb24gKGNvbG9yVHlwZSwgZGVwdGgsIGNvbG9ycykge1xuICAgICAgICAvLyBDYWxjdWxhdGUgbGVuZ3RoXG4gICAgICAgIHRoaXMud3JpdGVJbnQ0KGNvbG9ycy5sZW5ndGggKiBkZXB0aCAqIDMgPj4gMyk7XG4gICAgICAgIHRoaXMucmVzZXRDUkMoKTtcbiAgICAgICAgdGhpcy53cml0ZVR5cGUoXCJQTFRFXCIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy53cml0ZUJ5dGUoY29sb3JzW2ldID4+IDE2KTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVCeXRlKGNvbG9yc1tpXSA+PiA4KTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVCeXRlKGNvbG9yc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0ZUNSQygpO1xuICAgIH0sXG5cbiAgICB3cml0ZUlEQVRDaHVuazogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy53cml0ZUNodW5rKFwiSURBVFwiLCBkYXRhKTtcbiAgICB9LFxuXG4gICAgd3JpdGVJRU5EQ2h1bms6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy53cml0ZUludDQoMCk7XG4gICAgICAgIHRoaXMucmVzZXRDUkMoKTtcbiAgICAgICAgdGhpcy53cml0ZVR5cGUoXCJJRU5EXCIpO1xuICAgICAgICB0aGlzLndyaXRlQ1JDKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgQmFzZTY0RW5jb2Rpbmcgb2YgdGhlIHN0cmVhbS5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0QmFzZTY0U3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhMSwgYTIsIGEzLFxuICAgICAgICAgICAgZTMsIGU0LFxuICAgICAgICAgICAgYXJyYXkgPSB0aGlzLmFycmF5LFxuICAgICAgICAgICAgbCA9IHRoaXMuYXJyYXkubGVuZ3RoLFxuICAgICAgICAgICAgbiA9IGwgLSBsICUgMyxcbiAgICAgICAgICAgIHIgPSBbXSxcbiAgICAgICAgICAgIGsgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSArPSAzKSB7XG4gICAgICAgICAgICBhMSA9IGFycmF5W2ldO1xuICAgICAgICAgICAgYTIgPSBhcnJheVtpICsgMV07XG4gICAgICAgICAgICBhMyA9IGFycmF5W2kgKyAyXTtcbiAgICAgICAgICAgIHIucHVzaChCYXNlNjRNYXAuY2hhckF0KGExID4+IDIpICsgQmFzZTY0TWFwLmNoYXJBdCgoKGExICYgMykgPDwgNCkgfCAoYTIgPj4gNCkpICtcbiAgICAgICAgICAgICAgICBCYXNlNjRNYXAuY2hhckF0KCgoYTIgJiAweGYpIDw8IDIpIHwgKGEzID4+IDYpKSArIEJhc2U2NE1hcC5jaGFyQXQoYTMgJiAweDNmKSk7XG4gICAgICAgIH1cblxuICAgICAgICBhMSA9IGFycmF5W2ldO1xuICAgICAgICBhMiA9IGFycmF5W2kgKyAxXTtcbiAgICAgICAgYTMgPSBhcnJheVtpICsgMl07XG4gICAgICAgIGlmICh0eXBlb2YgYTIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBlMyA9IGU0ID0gNjQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlMyA9ICgoYTIgJiAweGYpIDw8IDIpIHwgKGEzID4+IDYpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhMyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBlNCA9IDY0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlNCA9IGEzICYgMHgzZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByLnB1c2goQmFzZTY0TWFwLmNoYXJBdChhMSA+PiAyKSArIEJhc2U2NE1hcC5jaGFyQXQoKChhMSAmIDMpIDw8IDQpIHwgKGEyID4+IDQpKSArXG4gICAgICAgICAgICBCYXNlNjRNYXAuY2hhckF0KGUzKSArIEJhc2U2NE1hcC5jaGFyQXQoZTQpKTtcblxuICAgICAgICByZXR1cm4gci5qb2luKCcnKTtcbiAgICB9XG59O1xuXG5cbi8qKlxuICpcbiAqIEB0eXBlIHtBcnJheX1cbiAqIEBwcml2YXRlXG4gKi9cblBOR1N0cmVhbS5fX0NSQ0xvb2t1cFRhYmxlID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2NyYzMyID0gbmV3IFVpbnQzMkFycmF5KDI1Nik7XG4gICAgLyogQ3JlYXRlIGNyYzMyIGxvb2t1cCB0YWJsZSAqL1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgdmFyIGMgPSBpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDg7IGorKykge1xuICAgICAgICAgICAgaWYgKGMgJiAxKSB7XG4gICAgICAgICAgICAgICAgYyA9IC0zMDY2NzQ5MTIgXiAoKGMgPj4gMSkgJiAweDdmZmZmZmZmKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYyA9IChjID4+IDEpICYgMHg3ZmZmZmZmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfY3JjMzJbaV0gPSBjO1xuICAgIH1cbiAgICByZXR1cm4gX2NyYzMyO1xufSkoKTtcblxudmFyIFBOR1NpZ25hdHVyZSA9IFsxMzcsIDgwLCA3OCwgNzEsIDEzLCAxMCwgMjYsIDEwXTtcblxuZnVuY3Rpb24gYWRsZXIzMihkYXRhLCBsZW5ndGgpIHtcbiAgICAvLyBjb21wdXRlIGFkbGVyMzIgb2Ygb3V0cHV0IHBpeGVscyArIHJvdyBmaWx0ZXIgYnl0ZXNcbiAgICB2YXIgTU9EX0FETEVSID0gNjU1MjE7XG4gICAgLyogbGFyZ2VzdCBwcmltZSBzbWFsbGVyIHRoYW4gNjU1MzYgKi9cbiAgICB2YXIgTk1BWCA9IDU1NTI7XG4gICAgLyogTk1BWCBpcyB0aGUgbGFyZ2VzdCBuIHN1Y2ggdGhhdCAyNTVuKG4rMSkvMiArIChuKzEpKEJBU0UtMSkgPD0gMl4zMi0xICovXG4gICAgdmFyIGEgPSAxO1xuICAgIHZhciBiID0gMDtcbiAgICB2YXIgbiA9IE5NQVg7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGEgKz0gZGF0YVtpXTtcbiAgICAgICAgYiArPSBhO1xuICAgICAgICBpZiAoKG4gLT0gMSkgPT0gMCkge1xuICAgICAgICAgICAgYSAlPSBNT0RfQURMRVI7XG4gICAgICAgICAgICBiICU9IE1PRF9BRExFUjtcbiAgICAgICAgICAgIG4gPSBOTUFYO1xuICAgICAgICB9XG4gICAgfVxuICAgIGEgJT0gTU9EX0FETEVSO1xuICAgIGIgJT0gTU9EX0FETEVSO1xuICAgIHJldHVybiAoYiA8PCAxNikgfCBhO1xufVxuXG4vKipcbiAqIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzE5NTBcbiAqIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzE5NTEgMy4yLjRcbiAqIEBwYXJhbSBkYXRhXG4gKi9cbmZ1bmN0aW9uIHpsaWJOb0NvbXByZXNzaW9uKGRhdGEsIGxlbmd0aCkge1xuICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICsgNCArIDUgKiBNYXRoLmNlaWwobGVuZ3RoIC8gMHhmZmZmKSArIGxlbmd0aCksXG4gICAgICAgIGhlYWRlciA9ICgoOCArICg3IDw8IDQpKSA8PCA4KSB8ICgzIDw8IDYpLFxuICAgICAgICBjb250aW51ZUhlYWRlciA9IFswLCAweGZmLCAweGZmLCAwLCAwXSxcbiAgICAgICAgcG9zID0gMCwgcmVzdDtcbiAgICBoZWFkZXIgKz0gMzEgLSAoaGVhZGVyICUgMzEpO1xuICAgIGJ1ZmZlcltwb3MrK10gPSBoZWFkZXIgPj4gODtcbiAgICBidWZmZXJbcG9zKytdID0gaGVhZGVyO1xuICAgIGZvciAodmFyIGkgPSAwOyBpICsgMHhmZmZmIDwgbGVuZ3RoOyBpICs9IDB4ZmZmZikge1xuICAgICAgICBidWZmZXIuc2V0KGNvbnRpbnVlSGVhZGVyLCBwb3MpO1xuICAgICAgICBwb3MgKz0gNTtcbiAgICAgICAgYnVmZmVyLnNldChkYXRhLnN1YmFycmF5KGksIGkgKyAweGZmZmYpLCBwb3MpO1xuICAgICAgICBwb3MgKz0gMHhmZmZmO1xuICAgIH1cbiAgICByZXN0ID0gbGVuZ3RoIC0gaTtcbiAgICBpZiAocmVzdCkge1xuICAgICAgICBidWZmZXJbcG9zKytdID0gMTtcbiAgICAgICAgYnVmZmVyW3BvcysrXSA9IHJlc3QgJiAweGZmO1xuICAgICAgICBidWZmZXJbcG9zKytdID0gKHJlc3QgPj4gOCkgJiAweGZmO1xuICAgICAgICByZXN0ID0gfnJlc3Q7XG4gICAgICAgIGJ1ZmZlcltwb3MrK10gPSByZXN0ICYgMHhmZjtcbiAgICAgICAgYnVmZmVyW3BvcysrXSA9IChyZXN0ID4+IDgpICYgMHhmZjtcbiAgICAgICAgYnVmZmVyLnNldChkYXRhLnN1YmFycmF5KGkpLCBwb3MpO1xuICAgICAgICBwb3MgKz0gfnJlc3Q7XG4gICAgfVxuXG4gICAgdmFyIGNoZWNrc3VtID0gYWRsZXIzMihkYXRhLCBsZW5ndGgpO1xuICAgIGJ1ZmZlcltwb3MrK10gPSBjaGVja3N1bSA+PiAyNDtcbiAgICBidWZmZXJbcG9zKytdID0gY2hlY2tzdW0gPj4gMTY7XG4gICAgYnVmZmVyW3BvcysrXSA9IGNoZWNrc3VtID4+IDg7XG4gICAgYnVmZmVyW3BvcysrXSA9IGNoZWNrc3VtO1xuICAgIHJldHVybiBidWZmZXI7XG59XG5cbmZ1bmN0aW9uIHJvd0ZpbHRlcih3aWR0aCwgaGVpZ2h0LCBzYW1wbGVzLCBpbWFnZSkge1xuICAgIHZhciByZXN1bHQgPSBuZXcgVWludDhBcnJheSgod2lkdGggKiBzYW1wbGVzICsgMSkgKiBoZWlnaHQpLFxuICAgICAgICB3ID0gd2lkdGggKiBzYW1wbGVzLFxuICAgICAgICBwb3MgPSAwO1xuICAgIGZvciAodmFyIHkgPSAwLCBqID0gMDsgeSA8IGhlaWdodDsgeSsrLCBqICs9IHcpIHtcbiAgICAgICAgcmVzdWx0W3BvcysrXSA9IDA7XG4gICAgICAgIHJlc3VsdC5zZXQoaW1hZ2Uuc2xpY2UoaiwgaiArIHcpLCBwb3MpO1xuICAgICAgICBwb3MgKz0gdztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFbmNvZGUgYW4gUkdCQSBsaXN0IGludG8gVVRGLTggUE5HLlxuICpcbiAqIEBwYXJhbSBpbWFnZVxuICogQHBhcmFtIHdpZHRoXG4gKiBAcGFyYW0gaGVpZ2h0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVSR0JBdG9QTkcoaW1hZ2UsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFBOR1N0cmVhbSgpO1xuICAgIHN0cmVhbS53cml0ZUlIRFJDaHVuayh3aWR0aCwgaGVpZ2h0LCA4LyogOCBiaXQgZGVwdGgqLywgNiAvKiBUcnVlLWNvbG9yIHdpdGggYWxwaGEgKi8sIDAgLyogTm8gaW50ZXJsYWNlICovKTtcbiAgICBpbWFnZSA9IHJvd0ZpbHRlcih3aWR0aCwgaGVpZ2h0LCA0LCBpbWFnZSk7XG4gICAgaW1hZ2UgPSB6bGliTm9Db21wcmVzc2lvbihpbWFnZSwgaW1hZ2UubGVuZ3RoKTtcbiAgICBzdHJlYW0ud3JpdGVJREFUQ2h1bmsoaW1hZ2UpO1xuICAgIHN0cmVhbS53cml0ZUlFTkRDaHVuaygpO1xuICAgIHJldHVybiAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBzdHJlYW0uZ2V0QmFzZTY0U3RyaW5nKCk7XG59XG5cbi8vIHJhc3Rlci5lbmNvZGVSR0JBdG9QTkcgPSBlbmNvZGVSR0JBdG9QTkc7Il19
